<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Preparation | vGPU Wiki</title>
    <meta name="generator" content="VuePress 1.8.2">
    <link rel="icon" type="image/png" sizes="256x256" href="/GPU_Virtualization-Wiki/assets/img/favicon.png">
    <meta name="description" content="">
    
    <link rel="preload" href="/GPU_Virtualization-Wiki/assets/css/0.styles.365d8210.css" as="style"><link rel="preload" href="/GPU_Virtualization-Wiki/assets/js/app.cb83bc8a.js" as="script"><link rel="preload" href="/GPU_Virtualization-Wiki/assets/js/2.b91d4cf5.js" as="script"><link rel="preload" href="/GPU_Virtualization-Wiki/assets/js/13.c9c55aa6.js" as="script"><link rel="prefetch" href="/GPU_Virtualization-Wiki/assets/js/10.c5a20f5c.js"><link rel="prefetch" href="/GPU_Virtualization-Wiki/assets/js/11.1dee2f7e.js"><link rel="prefetch" href="/GPU_Virtualization-Wiki/assets/js/12.cf9e23d6.js"><link rel="prefetch" href="/GPU_Virtualization-Wiki/assets/js/14.7b936669.js"><link rel="prefetch" href="/GPU_Virtualization-Wiki/assets/js/15.19637355.js"><link rel="prefetch" href="/GPU_Virtualization-Wiki/assets/js/3.f1892e00.js"><link rel="prefetch" href="/GPU_Virtualization-Wiki/assets/js/4.a3c22764.js"><link rel="prefetch" href="/GPU_Virtualization-Wiki/assets/js/5.6474fb52.js"><link rel="prefetch" href="/GPU_Virtualization-Wiki/assets/js/6.25cc8daf.js"><link rel="prefetch" href="/GPU_Virtualization-Wiki/assets/js/7.ef3e5745.js"><link rel="prefetch" href="/GPU_Virtualization-Wiki/assets/js/8.28e20eb3.js"><link rel="prefetch" href="/GPU_Virtualization-Wiki/assets/js/9.a5d99119.js">
    <link rel="stylesheet" href="/GPU_Virtualization-Wiki/assets/css/0.styles.365d8210.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/GPU_Virtualization-Wiki/" class="home-link router-link-active"><img src="/GPU_Virtualization-Wiki/assets/img/logo-nogaps.png" alt="vGPU Wiki" class="logo"> <span class="site-name can-hide">vGPU Wiki</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"> <a href="https://github.com/KrutavShah/GPU_Virtualization-Wiki" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"> <a href="https://github.com/KrutavShah/GPU_Virtualization-Wiki" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></nav>  <ul class="sidebar-links"><li><a href="/GPU_Virtualization-Wiki/overview.html" class="sidebar-link">Project Overview</a></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading open"><span>Installation Guide</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/GPU_Virtualization-Wiki/installation/preparation.html" aria-current="page" class="active sidebar-link">Preparation</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/GPU_Virtualization-Wiki/installation/preparation.html#disclaimer" class="sidebar-link">Disclaimer</a></li><li class="sidebar-sub-header"><a href="/GPU_Virtualization-Wiki/installation/preparation.html#hardware-setup" class="sidebar-link">Hardware Setup</a></li><li class="sidebar-sub-header"><a href="/GPU_Virtualization-Wiki/installation/preparation.html#obtaining-drivers-and-licensing" class="sidebar-link">Obtaining Drivers and Licensing</a></li><li class="sidebar-sub-header"><a href="/GPU_Virtualization-Wiki/installation/preparation.html#install-dependencies" class="sidebar-link">Install Dependencies</a></li></ul></li><li><a href="/GPU_Virtualization-Wiki/installation/driver-customization.html" class="sidebar-link">Driver Customization</a></li><li><a href="/GPU_Virtualization-Wiki/installation/host-setup.html" class="sidebar-link">Host Setup</a></li><li><a href="/GPU_Virtualization-Wiki/installation/license-server.html" class="sidebar-link">License Server</a></li><li><a href="/GPU_Virtualization-Wiki/installation/guest-setup.html" class="sidebar-link">Guest Setup</a></li></ul></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Reference Documentation</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Tools</span> <span class="arrow right"></span></p> <!----></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="frontmatter-title"><a href="#frontmatter-title" class="header-anchor">#</a> Preparation</h1> <h2 id="disclaimer"><a href="#disclaimer" class="header-anchor">#</a> Disclaimer</h2> <p>Using vGPU on unsupported/uncertified hardware is not recommended, but this script will still enable certain cards to run the technology. We provide this to you at your own risk, so keep in mind that it may not work for you. The project is provided under the MIT license, with no warranty whatsoever. Community support for the project through online channels may be available, but is not guaranteed.</p> <h2 id="hardware-setup"><a href="#hardware-setup" class="header-anchor">#</a> Hardware Setup</h2> <p>If you have not already done so, start by installing a compatible graphics card into an available PCI Express slot on the system mainboard while the computer is off. You’ll also need to verify that your hardware is capable of running vGPU (see <a href="/GPU_Virtualization-Wiki/overview.html#supported-hardware">Supported Hardware</a>). A system upgrade may be necessary if you do not have compatible hardware.</p> <p>Once you have verified your hardware is supported, enter your motherboard's firmware setup menu and enable the following options:</p> <ul><li>Virtualization Extensions/Support (also named Intel VT-x or AMD-V)</li> <li>IOMMU (also named Intel VT-d or AMD-Vi)</li></ul> <div class="custom-block tip"><p class="custom-block-title">TIP</p> <p>IOMMU is not strictly required; only Ampere cards usually need it. If something goes wrong, you should go ahead and make sure it's enabled anyways.</p></div> <p>For both of these processes, you should refer to documentation from your system vendor to get specific details on how to achieve the desired configuration and results for your system.</p> <h3 id="enabling-iommu"><a href="#enabling-iommu" class="header-anchor">#</a> Enabling IOMMU</h3> <p>Even when IOMMU is enabled in your system's firmware, Linux must be told to enable the IOMMU at boot-time. To do this, you must add a couple arguments to the kernel command line.</p> <ul><li>For Intel: <code>intel_iommu=on iommu=pt</code></li> <li>For AMD: <code>amd_iommu=on iommu=pt</code></li></ul> <p>Specific directions vary depending on the bootloader in use; for example, <a href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/8/html/configuring_and_managing_virtualization/managing-virtual-devices_configuring-and-managing-virtualization#attaching-sr-iov-networking-devices-to-virtual-machines_managing-sr-iov-devices" target="_blank" rel="noopener noreferrer">here<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> are the directions for doing so with GRUB 2.</p> <h2 id="obtaining-drivers-and-licensing"><a href="#obtaining-drivers-and-licensing" class="header-anchor">#</a> Obtaining Drivers and Licensing</h2> <p>You can apply for a 90-day evaluation of NVIDIA vGPU on their <a href="https://www.nvidia.com/en-us/data-center/resources/vgpu-evaluation/" target="_blank" rel="noopener noreferrer">website<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>. Once you fill in the requested information, your application will be reviewed, taking anywhere from 2 minutes to 48 hours (not a guarantee). Upon approval, you will receive an email containing directions to set up an account for the NVIDIA Licensing Portal.</p> <p>Once you log into the Portal, you will be able to locate drivers, the licensing server and your trial licenses. You will need to download the Linux KVM vGPU drivers, which will come in the form of an archive containing drivers for both host and guest, along with documentation for installing the drivers.</p> <h2 id="install-dependencies"><a href="#install-dependencies" class="header-anchor">#</a> Install Dependencies</h2> <p>You will need the following packages installed:</p> <ul><li>DKMS</li> <li>Kernel Headers</li> <li>Rust</li> <li>git</li> <li>mdevctl</li> <li>patch</li></ul> <p>The installation commands vary depending on your choice of distribution.</p> <ul><li>RHEL:</li></ul> <div class="language-sh extra-class"><pre class="language-sh"><code>dnf <span class="token function">install</span> <span class="token string">&quot;https://dl.fedoraproject.org/pub/epel/epel-release-latest-8.noarch.rpm&quot;</span>
dnf --enablerepo<span class="token operator">=</span><span class="token string">&quot;epel&quot;</span> <span class="token function">install</span> dkms kernel-devel mdevctl <span class="token function">git</span> patch rust rust-cargo
</code></pre></div><ul><li>Debian/Ubuntu:</li></ul> <div class="language-sh extra-class"><pre class="language-sh"><code><span class="token function">apt-get</span> <span class="token function">install</span> dkms linux-headers mdevctl <span class="token function">git</span> patch rustc cargo
</code></pre></div><ul><li>Arch</li></ul> <div class="language-sh extra-class"><pre class="language-sh"><code>pacman -S dkms linux-headers mdevctl <span class="token function">git</span> patch rust
</code></pre></div></div> <footer class="page-edit"><div class="edit-link"><a href="https://github.com/KrutavShah/GPU_Virtualization-Wiki/edit/main/installation/preparation.md" target="_blank" rel="noopener noreferrer">Help us improve this page!</a> <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></div> <!----></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/GPU_Virtualization-Wiki/overview.html" class="prev">
        Project Overview
      </a></span> <span class="next"><a href="/GPU_Virtualization-Wiki/installation/driver-customization.html">
        Driver Customization
      </a>
      →
    </span></p></div> </main></div><div class="global-ui"></div></div>
    <script src="/GPU_Virtualization-Wiki/assets/js/app.cb83bc8a.js" defer></script><script src="/GPU_Virtualization-Wiki/assets/js/2.b91d4cf5.js" defer></script><script src="/GPU_Virtualization-Wiki/assets/js/13.c9c55aa6.js" defer></script>
  </body>
</html>
